<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>lucsch · PV Playground</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg0: #050712;
      --bg1: #0c1024;
      --bg2: #11152e;
      --accent: #00f5ff;
      --accent2: #ff6bcb;
      --text: #f5f5ff;
      --muted: #9ca3c9;
      --mono: "JetBrains Mono", ui-monospace, SFMono-Regular, Menlo,
              Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    }

    * {
      box-sizing: border-box;
    }

    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      background: radial-gradient(circle at top, #141b3f 0, var(--bg0) 55%);
      color: var(--text);
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
                   sans-serif;
    }

    body {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1.5rem;
      overflow: hidden;
    }

    .scanlines::before {
      content: "";
      position: fixed;
      inset: 0;
      background: repeating-linear-gradient(
        to bottom,
        rgba(255, 255, 255, 0.035) 0,
        rgba(255, 255, 255, 0.035) 1px,
        transparent 1px,
        transparent 3px
      );
      mix-blend-mode: soft-light;
      opacity: 0.35;
      pointer-events: none;
      z-index: -1;
    }

    .shell {
      position: relative;
      width: 100%;
      max-width: 960px;
      border-radius: 18px;
      padding: 1.5rem;
      background: radial-gradient(circle at top left, #1b2457 0, var(--bg1) 45%, var(--bg0) 100%);
      box-shadow:
        0 0 40px rgba(0, 0, 0, 0.7),
        0 0 0 1px rgba(255, 255, 255, 0.02),
        0 0 60px rgba(0, 245, 255, 0.25);
      overflow: hidden;
    }

    .shell::after {
      content: "";
      position: absolute;
      inset: -40%;
      background:
        radial-gradient(circle at 0 0, rgba(0, 245, 255, 0.14), transparent 50%),
        radial-gradient(circle at 100% 100%, rgba(255, 107, 203, 0.16), transparent 55%);
      opacity: 0.7;
      mix-blend-mode: screen;
      pointer-events: none;
      z-index: -2;
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      gap: 1rem;
      margin-bottom: 1.5rem;
    }

    .title {
      font-family: var(--mono);
      font-size: clamp(1.8rem, 4vw, 2.4rem);
      text-transform: lowercase;
      letter-spacing: 0.08em;
      position: relative;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
    }

    .title-main {
      position: relative;
      padding: 0.15em 0.35em;
      border-radius: 999px;
      border: 1px solid rgba(0, 245, 255, 0.4);
      background: linear-gradient(120deg, rgba(0, 245, 255, 0.1), rgba(255, 107, 203, 0.15));
      box-shadow: 0 0 18px rgba(0, 245, 255, 0.45);
      overflow: hidden;
    }

    .title-main span {
      position: relative;
      z-index: 1;
    }

    .title-main::before {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(120deg, transparent 0, rgba(255, 255, 255, 0.4) 45%, transparent 100%);
      transform: translateX(-120%);
      animation: shine 4.5s linear infinite;
      opacity: 0.35;
    }

    @keyframes shine {
      0% { transform: translateX(-140%); }
      40% { transform: translateX(30%); }
      100% { transform: translateX(130%); }
    }

    .title-tag {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.25em;
      color: var(--muted);
      opacity: 0.9;
    }

    .dots {
      display: inline-flex;
      gap: 2px;
    }
    .dots span {
      width: 4px;
      height: 4px;
      border-radius: 999px;
      background: rgba(0, 245, 255, 0.7);
      animation: blink 1.3s infinite alternate;
    }
    .dots span:nth-child(2) { animation-delay: 0.18s; }
    .dots span:nth-child(3) { animation-delay: 0.34s; }

    @keyframes blink {
      0% { opacity: 0.2; transform: translateY(0); }
      100% { opacity: 1; transform: translateY(-1px); }
    }

    .subline {
      font-family: var(--mono);
      font-size: 0.8rem;
      color: var(--muted);
      text-align: right;
      opacity: 0.9;
    }

    .grid {
      display: grid;
      grid-template-columns: minmax(0, 2.1fr) minmax(0, 1.6fr);
      gap: 1.4rem;
    }

    @media (max-width: 780px) {
      body {
        padding: 0.75rem;
      }
      .grid {
        grid-template-columns: minmax(0, 1fr);
      }
      .subline {
        display: none;
      }
    }

    .terminal {
      position: relative;
      border-radius: 14px;
      background: radial-gradient(circle at top left, #232b5a 0, #11152e 50%, #090c18 100%);
      box-shadow:
        inset 0 0 0 1px rgba(255, 255, 255, 0.05),
        0 18px 40px rgba(0, 0, 0, 0.75);
      padding: 1rem 1.1rem 1.1rem;
      font-family: var(--mono);
      font-size: 0.84rem;
      color: #e5e7ff;
      overflow: hidden;
    }

    .terminal-header {
      display: flex;
      align-items: center;
      gap: 0.4rem;
      margin-bottom: 0.75rem;
      color: var(--muted);
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.16em;
    }

    .term-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: #f87171;
      box-shadow:
        10px 0 0 #fbbf24,
        20px 0 0 #34d399;
    }

    .term-body {
      position: relative;
      max-height: 320px;
    }

    .prompt {
      color: var(--accent);
    }

    .prompt span.path {
      color: #a5b4fc;
    }

    .comment {
      color: var(--muted);
    }

    .highlight {
      color: var(--accent2);
    }

    .result-line {
      margin-top: 0.7rem;
      padding: 0.55rem 0.6rem;
      border-radius: 8px;
      background: rgba(0, 245, 255, 0.03);
      border: 1px solid rgba(0, 245, 255, 0.14);
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      gap: 0.75rem;
      font-size: 0.86rem;
    }

    .result-kwh {
      font-weight: 600;
      font-size: 1.05rem;
      color: #e0faff;
    }

    .result-sub {
      font-size: 0.75rem;
      color: var(--muted);
      text-align: right;
    }

    .controls {
      margin-top: 0.6rem;
      display: grid;
      gap: 0.65rem;
    }

    .control {
      display: grid;
      grid-template-columns: minmax(0, 1.4fr) minmax(0, 1fr);
      gap: 0.5rem;
      align-items: center;
    }

    @media (max-width: 520px) {
      .control {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .control label {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--muted);
    }

    .control span.value {
      font-family: var(--mono);
      color: var(--accent);
      font-size: 0.75rem;
    }

    .control input[type="range"] {
      width: 100%;
      appearance: none;
      height: 4px;
      border-radius: 999px;
      background: rgba(148, 163, 255, 0.3);
      outline: none;
    }

    .control input[type="range"]::-webkit-slider-thumb {
      appearance: none;
      width: 14px;
      height: 14px;
      border-radius: 999px;
      background: var(--accent);
      border: 2px solid #020617;
      box-shadow: 0 0 0 4px rgba(0, 245, 255, 0.18);
      cursor: pointer;
      transition: transform 0.12s ease-out;
    }
    .control input[type="range"]::-moz-range-thumb {
      width: 14px;
      height: 14px;
      border-radius: 999px;
      background: var(--accent);
      border: 2px solid #020617;
      box-shadow: 0 0 0 4px rgba(0, 245, 255, 0.18);
      cursor: pointer;
      transition: transform 0.12s ease-out;
    }
    .control input[type="range"]:active::-webkit-slider-thumb,
    .control input[type="range"]:active::-moz-range-thumb {
      transform: scale(1.08);
    }

    .chip-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.4rem;
      margin-top: 0.7rem;
    }

    .chip {
      font-family: var(--mono);
      font-size: 0.68rem;
      padding: 0.2rem 0.55rem;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 255, 0.35);
      color: var(--muted);
      background: rgba(15, 23, 42, 0.75);
      backdrop-filter: blur(4px);
      white-space: nowrap;
    }

    .aside {
      position: relative;
      border-radius: 14px;
      padding: 1rem 1rem 0.9rem;
      background: linear-gradient(145deg, rgba(15, 23, 42, 0.96), rgba(15, 23, 42, 0.9));
      box-shadow:
        inset 0 0 0 1px rgba(148, 163, 255, 0.2),
        0 16px 35px rgba(0, 0, 0, 0.85);
      display: flex;
      flex-direction: column;
      gap: 0.9rem;
      font-size: 0.84rem;
    }

    .aside-heading {
      font-family: var(--mono);
      font-size: 0.78rem;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      color: var(--muted);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0.4rem;
    }

    .badge {
      font-size: 0.65rem;
      padding: 0.1rem 0.55rem;
      border-radius: 999px;
      border: 1px solid rgba(0, 245, 255, 0.45);
      color: var(--accent);
      text-transform: uppercase;
      letter-spacing: 0.14em;
    }

    .aside p {
      margin: 0;
      color: var(--muted);
      line-height: 1.5;
    }

    .ext-link {
      margin-top: auto;
      padding-top: 0.3rem;
      display: flex;
      flex-wrap: wrap;
      gap: 0.55rem;
      align-items: center;
      justify-content: space-between;
    }

    .btn-link {
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      padding: 0.45rem 0.8rem;
      border-radius: 999px;
      border: 1px solid rgba(0, 245, 255, 0.7);
      background: radial-gradient(circle at top left, rgba(0, 245, 255, 0.16), rgba(15, 23, 42, 0.85));
      color: var(--text);
      text-decoration: none;
      font-family: var(--mono);
      font-size: 0.8rem;
      letter-spacing: 0.05em;
      text-transform: uppercase;
    }

    .btn-link span.icon {
      font-size: 1rem;
      transform: translateY(1px);
    }

    .btn-link:hover {
      box-shadow: 0 0 18px rgba(0, 245, 255, 0.4);
      transform: translateY(-1px);
    }

    .ext-note {
      font-size: 0.7rem;
      color: var(--muted);
      font-family: var(--mono);
      opacity: 0.85;
    }

    ::selection {
      background: rgba(0, 245, 255, 0.3);
      color: #f9fafb;
    }
  </style>
</head>
<body class="scanlines">
<main class="shell">
  <header>
    <div class="title">
      <div class="title-main">
        <span>lucsch</span>
      </div>
      <div class="dots">
        <span></span><span></span><span></span>
      </div>
    </div>
    <div class="subline">
      <span>PV · code · slight overengineering</span>
    </div>
  </header>

  <section class="grid">
    <!-- Left: pseudo-terminal with PV calculator -->
    <section class="terminal" aria-label="lucsch pv shell">
      <div class="terminal-header">
        <div class="term-dot"></div>
        <span>lucsch@hessen</span>
        <span>·</span>
        <span>pv-shell</span>
      </div>
      <div class="term-body">
        <div>
          <div><span class="prompt">lucsch@pv</span>:<span class="path">~/hessen</span>$ ./yield --wp 10000 --tilt 30 --az 180</div>
          <div class="comment"># quick&dirty mitteldeutschland-estimate · no cloud bullshit, just geometry + stats</div>
        </div>

        <div class="controls">
          <div class="control">
            <div>
              <label for="wp">Watt&nbsp;Peak</label>
              <div class="chip-row">
                <span class="chip">1&nbsp;kWp ≈ 965&nbsp;kWh/a</span>
                <span class="chip">Hessen-Mitte&nbsp;Preset</span>
              </div>
            </div>
            <div>
              <input id="wp" type="range" min="1000" max="15000" step="500" value="10000" />
              <span class="value"><span id="wp-val">10.0</span>&nbsp;kWp</span>
            </div>
          </div>

          <div class="control">
            <div>
              <label for="tilt">Neigung</label>
              <span class="value"><span id="tilt-val">30</span>°</span>
            </div>
            <div>
              <input id="tilt" type="range" min="0" max="60" step="1" value="30" />
            </div>
          </div>

          <div class="control">
            <div>
              <label for="az">Azimut</label>
              <span class="value">
                <span id="az-val">180</span>°
                <span id="az-label" style="margin-left:0.25rem; color:var(--muted);">(Süd)</span>
              </span>
            </div>
            <div>
              <input id="az" type="range" min="0" max="360" step="5" value="180" />
            </div>
          </div>
        </div>

        <div class="result-line">
          <div>
            ≈ <span class="result-kwh" id="kwh-out">9&nbsp;650</span> kWh&nbsp;/&nbsp;a
          </div>
          <div class="result-sub">
            <div><span id="spec-out">965</span> kWh/kWp · Jahr</div>
            <div><span id="vh-out">965</span> Vollbenutzungsstunden</div>
          </div>
        </div>

        <div style="margin-top:0.7rem; font-size:0.72rem;" class="comment">
          # Azimut 0° = Nord, 90° = Ost, 180° = Süd, 270° = West · Modell kalibriert auf Fulda/Hessen 2025
        </div>
      </div>
    </section>

    <!-- Right: info + external link -->
    <aside class="aside">
      <div class="aside-heading">
        <span>pv notes // hessen-preset</span>
        <span class="badge">v0.1 nerd-build</span>
      </div>
      <p>
        Mini-Spielplatz für einen Mitteldeutschland-PV-Schätzer.
        Keine stündliche NASA-Zeitreihe, sondern ein bewusst
        <span class="highlight">frech vereinfachtes Modell</span>,
        grob an Fulda-Daten und Fraunhofer-Stats kalibriert.
      </p>
      <p>
        Für „richtige“ Visualisierung mit Sonne-über-dem-Jahr
        gibt’s natürlich noch ein Heavy-Tool:
      </p>

      <div class="ext-link">
        <a class="btn-link" href="https://ghghrzg.github.io/webpage/solar_visualization.html" target="_blank" rel="noreferrer">
          <span class="icon">☀️</span>
          <span>Solar&nbsp;Visualization</span>
        </a>
        <div class="ext-note">
          opens in a new tab · bring your own curiosity
        </div>
      </div>
    </aside>
  </section>
</main>

<script>
  // --- PV model for central Germany / Hesse ---
  // Simple orientation/tilt factor model, calibrated on ~965 kWh/kWp for South, ~35° tilt.

  function pvYieldHessenKwhPerYear(wattPeak, tiltDeg, azimuthDeg) {
    const powerKwp = wattPeak / 1000;
    const Y_REF = 965; // kWh/kWp*a – mittlerer Wert für gut ausgerichtete Anlage in Hessen

    // Normalize azimuth and compute deviation from South
    let az = ((azimuthDeg % 360) + 360) % 360;
    let delta = Math.abs(az - 180);
    if (delta > 180) delta = 360 - delta; // 0..180

    // Azimuth factor: 0°=South, 90°=E/W, 180°=North
    let kA;
    if (delta <= 30) {
      kA = 1.0;
    } else if (delta <= 90) {
      // 30..90°: 1.0 -> 0.9
      kA = 1.0 - 0.1 * (delta - 30) / 60;
    } else {
      // 90..180°: 0.9 -> ~0.65
      kA = 0.9 - 0.25 * (delta - 90) / 90;
      if (kA < 0.65) kA = 0.65;
    }

    // Tilt factor – optimum ~35°, ca. ±3% bei ±20°
    const dTilt = tiltDeg - 35;
    let kT = 1.0 - 0.000075 * dTilt * dTilt;
    if (kT < 0.9) kT = 0.9;
    if (kT > 1.0) kT = 1.0;

    return powerKwp * Y_REF * kA * kT;
  }

  // --- UI wiring ---
  const wpInput = document.getElementById("wp");
  const tiltInput = document.getElementById("tilt");
  const azInput = document.getElementById("az");

  const wpVal = document.getElementById("wp-val");
  const tiltVal = document.getElementById("tilt-val");
  const azVal = document.getElementById("az-val");
  const azLabel = document.getElementById("az-label");

  const kwhOut = document.getElementById("kwh-out");
  const specOut = document.getElementById("spec-out");
  const vhOut = document.getElementById("vh-out");

  function azDirectionLabel(az) {
    if (az >= 345 || az < 15) return "(Nord)";
    if (az >= 15 && az < 75) return "(Nordost)";
    if (az >= 75 && az < 105) return "(Ost)";
    if (az >= 105 && az < 165) return "(Südost)";
    if (az >= 165 && az < 195) return "(Süd)";
    if (az >= 195 && az < 255) return "(Südwest)";
    if (az >= 255 && az < 285) return "(West)";
    if (az >= 285 && az < 345) return "(Nordwest)";
    return "";
  }

  function formatNumber(x) {
    return x.toLocaleString("de-DE", { maximumFractionDigits: 0 });
  }

  function update() {
    const wp = Number(wpInput.value);
    const tilt = Number(tiltInput.value);
    const az = Number(azInput.value);

    wpVal.textContent = (wp / 1000).toFixed(1);
    tiltVal.textContent = tilt.toFixed(0);
    azVal.textContent = az.toFixed(0);
    azLabel.textContent = azDirectionLabel(az);

    const kwhYear = pvYieldHessenKwhPerYear(wp, tilt, az);
    const spec = kwhYear / (wp / 1000);

    kwhOut.textContent = formatNumber(kwhYear);
    specOut.textContent = spec.toFixed(0);
    vhOut.textContent = spec.toFixed(0);
  }

  wpInput.addEventListener("input", update);
  tiltInput.addEventListener("input", update);
  azInput.addEventListener("input", update);

  update();

  // Little console flex
  console.log("%c lucsch pv-shell ", "background:#00f5ff;color:#020617;padding:2px 6px;border-radius:4px;font-family:monospace");
  console.log("quick&dirty Hessen preset. no guarantees. if you sue, you get paid in kWh.");
</script>
</body>
</html>
